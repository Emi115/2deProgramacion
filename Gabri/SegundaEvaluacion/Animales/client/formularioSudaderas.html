<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Crear Sudadera</title>
    <link rel="stylesheet" href="css/formularioCreacion.css" />
  </head>
  <body>
    <h2>Crear Sudadera</h2>
    <form id="createSudaderaForm">
      <label for="nombre">Nombre:</label><br />
      <input
        type="text"
        id="nombre"
        name="nombre"
        required
        autocomplete="off"
      /><br />

      <label for="color">Color:</label><br />
      <input
        type="text"
        id="color"
        name="color"
        required
        autocomplete="off"
      /><br />

      <label for="dibujo">Dibujo:</label><br />
      <input
        type="text"
        id="dibujo"
        name="dibujo"
        required
        autocomplete="off"
      /><br />

      <label for="talla">Talla:</label><br />
      <input
        type="text"
        id="talla"
        name="talla"
        required
        autocomplete="off"
      /><br />

      <label for="foto">Foto (URL):</label><br />
      <input
        type="text"
        id="foto"
        name="foto"
        required
        autocomplete="off"
      /><br />

      <label for="capucha">Capucha:</label><br />
      <input type="checkbox" id="capucha" name="capucha" /><br />

      <label for="precio">Precio:</label><br />
      <input
        type="number"
        id="precio"
        name="precio"
        required
        autocomplete="off"
      /><br />

      <label for="descripcion">Descripción:</label><br />
      <textarea
        id="descripcion"
        name="descripcion"
        required
        autocomplete="off"
      ></textarea
      ><br />

      <label for="stock">Stock:</label><br />
      <input
        type="number"
        id="stock"
        name="stock"
        required
        autocomplete="off"
      /><br />

      <input type="submit" value="Crear Sudadera" />
    </form>

    <div id="mensaje"></div>
    <!-- Div para mostrar el mensaje de advertencia -->

    <script>
      document
        .getElementById("createSudaderaForm")
        .addEventListener("submit", function (e) {
          e.preventDefault();

          // Verificar si algún campo está vacío
          const formInputs = document.querySelectorAll("input, textarea");
          let isAnyEmpty = false;
          formInputs.forEach((input) => {
            if (!input.value.trim()) {
              isAnyEmpty = true;
            }
          });

          if (isAnyEmpty) {
            document.getElementById("mensaje").textContent =
              "Por favor, rellene todos los campos.";
            return;
          }

          document.getElementById("mensaje").textContent = ""; // Limpiar mensaje de advertencia

          // Obtener los valores del formulario
          const formData = {
            nombre: document.getElementById("nombre").value,
            color: document.getElementById("color").value,
            dibujo: document.getElementById("dibujo").value,
            talla: document.getElementById("talla").value.toUpperCase(), // Convertir a mayúsculas
            foto: document.getElementById("foto").value,
            capucha: document.getElementById("capucha").checked,
            precio: parseFloat(document.getElementById("precio").value),
            descripcion: document.getElementById("descripcion").value,
            stock: parseInt(document.getElementById("stock").value, 10),
          };

          // Enviar formulario
          fetch("http://localhost:3000/sudadera", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify(formData),
          })
            .then((response) => response.json())
            .then((data) => {
              console.log("Success:", data);
              alert("Sudadera creada con éxito!");
            })
            .catch((error) => {
              console.error("Error:", error);
              alert("Error al crear la sudadera");
            });
        });
    </script>
  </body>
</html>
